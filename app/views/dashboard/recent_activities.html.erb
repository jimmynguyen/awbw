<div class="flex flex-col mt-6">
  <!-- Header with User Dropdown -->
  <div class="flex items-center space-x-2 text-2xl font-semibold text-gray-700 mb-8">
    <span>Recent Activity for</span>&nbsp;
    <% if current_user.super_user? %>
      <div class="admin-only bg-blue-100 p-3">
        <%= form_with url: request.path, method: :get, local: true, html: { class: "inline-block" } do %>
          <%= select_tag :user_id,
                         options_from_collection_for_select(User.all.order(:first_name, :last_name),
                                                            :id, :full_name, params[:user_id] || @user.id),
                         include_blank: "All Users",
                         class: "border border-gray-300 rounded-md px-2 py-1 focus:outline-none focus:ring-1 focus:ring-indigo-500",
                         onchange: "this.form.submit()" %>
        <% end %>
      </div>
    <% else %>
      <%= @user.full_name %>
    <% end %>
  </div>

  <div class="overflow-x-auto">
    <div class="inline-block min-w-full align-middle">
      <div class="overflow-hidden border border-gray-200 rounded-lg shadow-sm">

        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
          <tr>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Date
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Activity
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Actions
            </th>
          </tr>
          </thead>

          <tbody class="bg-white divide-y divide-gray-200">
          <% @recent_activities.each do |activity| %>
            <%= render "recent_activity", activity: activity %>
          <% end %>
          </tbody>
        </table>

      </div>

      <div class="pagination mt-6">
        <%= will_paginate @recent_activities,
                          previous_label: '<<',
                          next_label: '>>',
                          inner_window: 2,
                          class: 'will-paginate-wrapper flex space-x-2 list-none p-0' %>
      </div>
    </div>
  </div>
</div>
