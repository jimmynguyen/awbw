<div class="max-w-5xl mx-auto px-4 py-8 space-y-8" id="contact-us-container">

  <!-- Contact Info Card -->
  <div class="bg-white border border-gray-200 rounded-xl shadow-sm p-6">
    <h2 class="text-2xl font-semibold text-gray-900 mb-3">Contact Us</h2>
    <div class="text-gray-700 mt-3">
      Have questions, comments, or concerns?
    </div>

    <div class="mt-6 space-y-3 text-gray-800">
      <div class="font-semibold text-gray-900">Email: <%= mail_to "programs@awbw.org",
                                                                  subject: "Website question",
                                                                  class: "text-blue-500 hover:text-blue-700" %></div>
      <div class="font-semibold text-gray-900">Phone: <%= link_to "310-396-0317",
                                                                  "tel:310-396-0317",
                                                                  class: "text-blue-500 hover:text-blue-700" %></div>
      <div class="font-semibold text-gray-900">Fax: <%= link_to "310-396-9698",
                                                                  "tel:310-396-9698",
                                                                  class: "text-blue-500 hover:text-blue-700" %></div>

      <div>
        <div class="font-semibold text-gray-900 mb-3">
          Form Submission:
          <span class="font-normal text-sm text-gray-900 mb-3">
            Which program is your question about?
          </span>
        </div>
        <!-- Select Program Buttons -->
        <div class="">
          <div class="flex flex-wrap gap-3 justify-start">
            <%= link_to "?q=adult#contact-form",
                        class: "px-5 py-2.5 rounded-full text-white text-sm font-medium transition
                           #{params[:q] == 'adult' ? 'bg-blue-700' : 'bg-blue-600 hover:bg-blue-700'}" do %>
              Adult Program
            <% end %>

            <%= link_to "?q=children#contact-form",
                        class: "px-5 py-2.5 rounded-full text-white text-sm font-medium transition
                           #{params[:q] == 'children' ? 'bg-blue-700' : 'bg-blue-600 hover:bg-blue-700'}" do %>
              Children's Program
            <% end %>

            <%= link_to "?q=general#contact-form",
                        class: "px-5 py-2.5 rounded-full text-white text-sm font-medium transition
                           #{params[:q] == 'general' ? 'bg-blue-700' : 'bg-blue-600 hover:bg-blue-700'}" do %>
              General Questions
            <% end %>
          </div>

          <% if params[:q].present? %>
            <!-- Prompt -->
            <div id="contact-form" class="mt-6 border-t border-gray-200 pt-6">
              <p class="text-gray-700 mb-4">
                Great â€” you selected the
                <strong><%= params[:q] == "children" ? "Children's" : params[:q].humanize %></strong> program.
                Please complete the short form below and our team will respond as soon as possible.
              </p>

              <!-- Contact Form -->
              <%= form_tag("/contact_us", method: "POST", class: "space-y-6") do %>
                <input type="hidden" name="contact_us[q]" value="<%= params[:q] %>">

                <!-- Name Row -->
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">First Name *</label>
                    <input type="text"
                           name="contact_us[first_name]"
                           required
                           class="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-800
                            focus:border-blue-500 focus:ring focus:ring-blue-200 focus:outline-none">
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Last Name</label>
                    <input type="text"
                           name="contact_us[last_name]"
                           class="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-800
                            focus:border-blue-500 focus:ring focus:ring-blue-200 focus:outline-none">
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Email *</label>
                    <input type="email"
                           name="contact_us[from]"
                           required
                           class="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-800
                          focus:border-blue-500 focus:ring focus:ring-blue-200 focus:outline-none">
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Agency / Organization *</label>
                    <input type="text"
                           name="contact_us[agency]"
                           required
                           class="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-800
                          focus:border-blue-500 focus:ring focus:ring-blue-200 focus:outline-none">
                  </div>
                </div>

                <!-- Subject -->
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">Subject Line *</label>
                  <input type="text"
                         name="contact_us[subject]"
                         required
                         class="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-800
                          focus:border-blue-500 focus:ring focus:ring-blue-200 focus:outline-none">
                </div>

                <!-- Message -->
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">Your Message *</label>
                  <textarea name="contact_us[message]"
                            required
                            rows="5"
                            class="w-full rounded-md border border-gray-300 px-3 py-2 text-gray-800
                             focus:border-blue-500 focus:ring focus:ring-blue-200 focus:outline-none"></textarea>
                </div>

                <!-- Submit -->
                <div class="flex justify-end">
                  <input type="submit"
                         value="Submit"
                         class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2 rounded-md shadow-sm transition">
                </div>
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
    document.addEventListener("turbo:load", () => {
        const hash = window.location.hash;
        if (hash === "#contact-form") {
            const target = document.querySelector(hash);
            if (target) {
                target.scrollIntoView({ behavior: "smooth", block: "start" });
            }
        }
    });
</script>
