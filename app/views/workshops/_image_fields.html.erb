<div class="nested-fields image-upload-field">
  <div class="nested-fields flex flex-col gap-2">
    <div class="mb-4">
      <%= f.label :file, "Main Image", class: "block mb-1 font-medium text-gray-700" %>
      <label class="relative cursor-pointer inline-block w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2 hover:border-gray-400">
        <%= f.file_field :file, class: "absolute inset-0 w-full h-full opacity-0 cursor-pointer" %>
        <span class="pointer-events-none text-gray-700">Choose new file</span>
      </label>
      <%= f.error :file, wrap_with: { tag: :p, class: "text-red-500 text-sm mt-1" } %>
      <%= f.hint "***If any image includes the client or client artwork, fill out #{
        link_to "Art/Media Release Form",
                      "http://dashboard.awbw.org/resources/859", # TODO - this is brittle/hard-coded
                      class: "text-gray-900 hover:underline font-medium" }***".html_safe,
                 wrap_with: { tag: :p, class: "text-gray-500 text-sm mt-1" } %>
    </div>

    <% if f.object.persisted? && f.object.file.present? %>
      <div class="flex flex-col items-center mb-4">
        <div class="w-full max-w-[250px] h-[250px] overflow-hidden rounded-md border mb-2">
          <%= image_tag f.object.file.url(:medium),
                        alt: "Main Image",
                        class: "w-full h-full object-contain rounded-md" %>
        </div>

        <%= f.input :_destroy, as: :boolean,
                     label: "Remove",
                     wrapper_html: { class: "flex justify-center items-center mb-0" },
                     label_html: { class: "text-sm text-gray-700 ml-2" } %>
      </div>
    <% end %>

  </div>
</div>
